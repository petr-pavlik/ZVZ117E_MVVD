# Popisná statistika {#sec-popisna}

Popisná statistika má za cíle **souhrnně popsat soubor** (spíše než použít data k získání informací o populaci, o které se předpokládá, že vzorek dat reprezentuje).

::: callout-warning
## Cíle cvičení

-   Provést import datové sady
-   Být schopen popsat číselné proměnné v datech popsat s pomocí uvedených statistik\
:::

## Import dat {#sec-popisna-importdat}

V hydrologii pracujeme s datovými sadami, které mají rúznou podobu. Nejběžnějším výměnným formát jsou stále obecné \*.xls/\*.xlsx, \*.txt, \*.csv (*comma separated values*). S pomocí těchto formátů jsou často katalogizována data z automatických měření. Dále méně časté formáty \*.json (*javascript object notation*), \*.shp (*shapefile*), \*.laz, \*.nc (*NetCDF file*), \*.parquet (*Apache parqet*). A jako poslední doménově specifické \*.RData, nebo \*.rds. Formátů je velké množství, nicméně je velmi obtížné narazit na některý, pro který neexistuje v R možnost importu ať už v základní konfiguraci nebo s pomocí externích balíčků.

V RStudio se nachází poměrně propracovaný průvodce importem dat, který naklikneme pod záložkou **Environment** \> **Import Dataset**.

![](images/data-import.png){fig-align="center" width="624"}

```{r}
global_temperatures <- read.csv(file = "./data/JonesGlobalT.csv", row.names = 1)
head(x = global_temperatures, n = 5)
```

```{r}
global_temperature_yr <- aggregate(x = . ~ YEAR, # <1>
                                   FUN = mean,  # <1>
                                   data = global_temperatures) # <1>
head(x = global_temperature_yr, n = 5)
```


1.  Agregace dat do průměrů za roční období.

```{r, fig.align='center'}
par(mfrow = c(1, 2))
with(data = global_temperature_yr, expr = plot(YEAR, JAN, type = "l"))
with(data = global_temperature_yr, 
     expr = boxplot(ANNUAL, horizontal = TRUE))
```

::: callout-tip
## Úloha

1.  Nahrajte data do prostředí s pomocí vhodně parametrizované `read.___()` funkce.\
2.  Doplňte hydrologický rok.\
3.  Proveďte agregaci dat průměrem pro jednotlivé měsíce.\
4.  Vyneste do grafu pomocí funkce `plot()`.
:::


## Statistický soubor {#sec-popisna-statistickysoubor}

### Základní soubor (populace)

Soubor všech jedinců, u nichž být zaznamenán výskyt sledovaného znaku.

#### Soubor se známým rozsahem {#sec-popisna-statistickysoubor-souborseznamymrozsahem}

#### Soubor s neznámým rozsahem {#sec-popisna-statistickysoubor-souborsneznamymrozsahem}

### Výběrový soubor (výběr) {#sec-popisna-statistickysoubor-vyberovysoubor}

Je soubor o konečném počtu $n$ prvků základního souboru, u kterého je prováděno měření charakteristik.

Výběrový soubor vzniká realizací **náhodného výběru**.

Níže uvedené funkce jsou počítané s pomocí následujícího vektoru

```{r, collapse=TRUE, echo=TRUE}
set.seed(1)
x <- round(rnorm(30), 2)
x
```

## Míry polohy

Pro obě extrémní polohy ($\min$ a $\max$) jsou v R stejnojmenné funkce.

| Název              | Funkce          | Vzorec                             |
|--------------------|-----------------|------------------------------------|
| minimum/maximum    | `min(x)/max(x))`| $\max(x) - \min(x)$                |
| výběrový kvantil   | `quantile(x)`   | -                                  |
| aritmetický průměr | `mean(x)`       | $\dfrac{1}{n}\sum_{i=1}^{n}x_i$    |
| medián             | `median(x)`     |  -                                 |
| modus              |  -              |  -                                 |

### Výběrový kvantil

```{r}
t(sapply(X = 1:7, FUN = function(i) quantile(x))) #<1>
```
1.  Využití anonymní funkce `function(i)` vektorizované pro rozsah hodnot 1:7 na pozici type ve funkci `quantile()`

#### Medián

Artitmetický průměr hodnot na pozicích $\frac{n}{2}$ a $\frac{n}{2+1}$ v seřazeném souboru.

### Modus

Za modus se označuje nejčastěji se vyskytující hodnota v souboru. Četnost výskytu hodnot na reálné ose se nahrazuje buďto hustotou (funkce `density()`) nebo je možné použít kombinaci funkcí `cut()` a `table()`.

```{r,collapse=FALSE}
table(round(x = x, digits = 0)) #<1>
table(cut(x, breaks = 10)) #<2>
plot(density(x = x)) #<3>
```
1.  Funkce `table()` provede součty speficikovaných hodnot. V tomto případě po zaokrouhlení na celá čísla.
2.  Nyní s pomocí funkce `cut()` rozlišíme četnosti do 10 intervalů a následně spočteme počet hodnot v těchto intervalech.
3.  Jádrový odhad hustoty.

### Harmonický průměr

Aritmetický průměr převrácených hodnot.

$$
\bar{x_h} = \dfrac{n}{\sum\limits_{i=1}^{n}\frac{1}{x_i}}
$$

### Průměr stupně $\alpha$


```{r, collapse=TRUE}
min(x) #<1>
max(x) #<1>
max(x) - min(x) #<2>
range(x) #<2>
```

1.  Statistiky minimum & maximum
2.  Rozpětí

## Míry variability

Výběrový rozptyl a směrodatnou odchylku spočteme v R pomocí funkcí `var()` (*variance*) a `sd()` *standard deviation*. Zatímco variační rozpětí popisuje rozpětí celého souboru, mezikvartilové rozpětí se omezuje na rozpětí poloviny hodnot, omezené $Q3$ a $Q1$ neboli $q_{75}$ a $q_{25}$.

| Název                  | Funkce          | Vzorec                                                               |
|------------------------|-----------------|----------------------------------------------------------------------|
| rozptyl                | `var(x)`        | $\sum\limits_{i=1}^{n}\dfrac{1}{n-1}(x_i - \bar{x})^2$               |
| směrodatná odchylka    | `sd(x)`         | $\sum\limits_{i=1}^{n}\sqrt{\dfrac{1}{n-1}(x_i - \bar{x})^2}$        |
| varianční rozpětí      | `range(x)`      | $\max(x) - \min(x)$                                                  |
| mezikvartilové rozpětí | `IQR(x)`        |  $\mathrm{Q}3 - \mathrm{Q}$                                          |
| variační koeficient    | `mean(x)/sd(x)` |  $\mathrm{Q}3 - \mathrm{Q}$                                          |


### Střední chyba aritmetického průměru

$$
s_x = \dfrac{s}{\sqrt{n}}
$$


### `fivenum()` \& `summary()`

Pokud nás nezajímá pouze konkrétní statistika, jsou k dispozici funkce vracející více hodnot najednou.

```{r}
fivenum(x)
summary(x)
```

::: callout-note
## Další zdroje

Funkce `summary()` je tzv. *S3 generic*, to znamená, že její chování je definované v závislosti na
objekt, na který je volána. Podívejte se na výstup `methods(summary)`. Pokud volána funkci na numerický vektor, tak je vybrána metoda `summary.numeric()`.

:::


## Rekapitulace

1.  Máte vektor hodnot: $0.64$, $0.98$, $-0.49$, $0.75$, $-1.35$, $1.65$, $1.12$, $-1.04$, $1.05$, $0.29$, $-0.6$, $-0.08$, $1.45$, $-1.87$, $-0.07$, $-0.02$, $0.62$, $0.01$, $-0.26$. Nalezněte:\       
  průměr `r fitb(0.1463158)` 10% kvantil `r fitb(-1.102)` a medián `r fitb(0.01)`.\
2.  Doplňte funkci `read.___()` aby výsledek byl
3.  Z datové sady vebrte sloupce 

